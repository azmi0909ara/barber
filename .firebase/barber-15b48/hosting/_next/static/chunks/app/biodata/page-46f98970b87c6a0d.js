(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[119],{3011:(e,t,r)=>{Promise.resolve().then(r.bind(r,7744))},708:(e,t,r)=>{"use strict";r.d(t,{db:()=>c,j:()=>i,k:()=>o});var s=r(9904),a=r(399),n=r(7058);let l=(0,s.Wp)({apiKey:"AIzaSyA57D78rdd5x_RCNQT1EhBtuBdrdbFodLs",authDomain:"barber-15b48.firebaseapp.com",projectId:"barber-15b48",storageBucket:"barber-15b48.firebasestorage.app",messagingSenderId:"215556113867",appId:"1:215556113867:web:30c08a848e185dcf0d224e",measurementId:"G-0KZEYZWEFL"}),c=(0,n.aU)(l),i=(0,a.xI)(l),o=(0,n.aU)(l)},6046:(e,t,r)=>{"use strict";var s=r(6658);r.o(s,"redirect")&&r.d(t,{redirect:function(){return s.redirect}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},7744:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(5155),a=r(2115),n=r(708),l=r(7058),c=r(6046),i=r(3588);let o=()=>{let[e,t]=(0,a.useState)(""),[r,o]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),b=(0,c.useRouter)(),[x,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{n.j.currentUser||m(!0)},[b]);let f=async t=>{t.preventDefault();try{if(!n.j.currentUser){u("No user is logged in");return}let t=(0,l.H9)(n.k,"users",n.j.currentUser.uid);(await (0,l.x7)(t)).exists()?await (0,l.BN)(t,{fullName:e,phoneNumber:r},{merge:!0}):await (0,l.BN)(t,{fullName:e,phoneNumber:r,createdAt:new Date}),b.push("/")}catch(e){u("Error saving data, please try again."),console.error(e)}};return(0,s.jsxs)(s.Fragment,{children:[x&&(0,s.jsx)(i.A,{isOpen:x,onClose:()=>m(!1)}),(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-[#1a1310] rounded-lg p-8 max-w-md w-full shadow-lg border border-[#6c541d]",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-[#f6c744] mb-6",children:"Complete Your Information"}),d&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded",children:d}),(0,s.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-[#f6c744] mb-2",children:"Full Name"}),(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-2 border border-[#6c541d] rounded focus:outline-none focus:ring-2 focus:ring-[#f6c744] text-black",required:!0,minLength:3})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-[#f6c744] mb-2",children:"Phone Number"}),(0,s.jsx)("input",{type:"text",value:r,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 border border-[#6c541d] rounded focus:outline-none focus:ring-2 focus:ring-[#f6c744] text-black",required:!0})]}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-[#f6c744] text-[#1a1310] py-2 rounded hover:bg-[#e0b73a]",children:"Save Information"})]})]})})]})}},3588:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var s=r(5155),a=r(2115),n=r(399),l=r(708),c=r(7058),i=r(6046);let o=new n.HF,d=async(e,t)=>{if(!e)return;let r=(0,c.H9)(l.k,"users",e.uid);if(!(await (0,c.x7)(r)).exists())try{await (0,c.BN)(r,{displayName:e.displayName,email:e.email,createdAt:new Date,...t})}catch(e){console.error("Error creating user document:",e)}};function u(e){let{isOpen:t,onClose:r}=e,[c,u]=(0,a.useState)(""),[b,x]=(0,a.useState)(""),[m,f]=(0,a.useState)(""),[h,g]=(0,a.useState)(""),[p,j]=(0,a.useState)(""),[v,w]=(0,a.useState)(!1),N=(0,i.useRouter)(),y=async e=>{e.preventDefault();try{if(v){if(b!==m){j("Passwords do not match");return}let e=await (0,n.eJ)(l.j,c,b);await (0,n.r7)(e.user,{displayName:h}),await d(e.user,{registrationType:"email"}),N.push("/biodata")}else await (0,n.x9)(l.j,c,b);r(),C(),N.push("/biodata")}catch(e){j(e.message||"Authentication failed")}},k=async()=>{try{let e=(await (0,n.df)(l.j,o)).user;await d(e,{registrationType:"google"}),r(),C(),N.push("/biodata")}catch(e){j(e.message||"Google sign-in failed")}},C=()=>{u(""),x(""),f(""),g(""),j("")};return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-[#1a1310] rounded-lg p-8 max-w-md w-full shadow-lg border border-[#6c541d]",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-[#f6c744]",children:v?"Register":"Sign In"}),(0,s.jsx)("button",{onClick:r,className:"text-[#f6c744] hover:text-white",type:"button",children:"âœ•"})]}),p&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded",children:p}),(0,s.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[v&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-[#f6c744] mb-2",children:"Username"}),(0,s.jsx)("input",{type:"text",value:h,onChange:e=>g(e.target.value),className:"w-full px-4 py-2 border border-[#6c541d] rounded focus:outline-none focus:ring-2 focus:ring-[#f6c744] text-black",required:v,minLength:3})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-[#f6c744] mb-2",children:"Email"}),(0,s.jsx)("input",{type:"email",value:c,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 border border-[#6c541d] rounded focus:outline-none focus:ring-2 focus:ring-[#f6c744] text-black",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-[#f6c744] mb-2",children:"Password"}),(0,s.jsx)("input",{type:"password",value:b,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 border border-[#6c541d] rounded focus:outline-none focus:ring-2 focus:ring-[#f6c744] text-black",required:!0,minLength:6})]}),v&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-[#f6c744] mb-2",children:"Confirm Password"}),(0,s.jsx)("input",{type:"password",value:m,onChange:e=>f(e.target.value),className:"w-full px-4 py-2 border border-[#6c541d] rounded focus:outline-none focus:ring-2 focus:ring-[#f6c744] text-black",required:v,minLength:6})]}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-[#f6c744] text-[#1a1310] py-2 rounded hover:bg-[#e0b73a]",children:v?"Register with Email":"Sign in with Email"})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsxs)("button",{onClick:k,type:"button",className:"w-full bg-transparent border border-[#6c541d] text-[#f6c744] py-2 rounded hover:bg-[#6c541d] hover:text-white flex items-center justify-center gap-2",children:[(0,s.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,s.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,s.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,s.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]})}),(0,s.jsx)("div",{className:"mt-4 text-center",children:(0,s.jsx)("button",{onClick:()=>{w(!v),C()},className:"text-[#f6c744] hover:text-white font-medium",children:v?"Already have an account? Sign in":"Need an account? Register"})})]})}):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,882,459,441,517,358],()=>t(3011)),_N_E=e.O()}]);